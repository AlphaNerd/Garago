<ion-view view-title="Smart Library">
  <!-- <ion-nav-bar class="bar-stable">
        <ion-nav-back-button>
        </ion-nav-back-button>

        <ion-nav-buttons side="left">
            <button class="button button-icon button-clear ion-navicon" menu-toggle="left">
                </button>
        </ion-nav-buttons>

        <ion-nav-buttons side="right">
            <button class="button button-icon button-clear" ng-click="createNewPlan()"><i class="fa fa-icon fa-plus"></i></button>
        </ion-nav-buttons>

    </ion-nav-bar> -->
  <ion-content id="Library" scroll="true">
    <div class="search animated slideInDown">
      <label class="item item-input">
        <i class="icon ion-search placeholder-icon"></i> &nbsp;
        <input class="main-search" type="text" placeholder="Search" ng-model="search.text" ng-change="searchFiles(search.text)">
      </label>
      <div class="filters">
        <i class="fa fa-times-circle placeholder-icon" ng-click="clearSearch()"></i>
        <i class="fa fa-filter" ng-model="showFilters" ng-click="toggleFilters()"></i>
      </div>
    </div>
    <div class="filter-panel" ng-class="showFilters ? 'open':'close'" ng-show="showFilters">
      <i class="fa fa-retweet" ng-click=""></i>
      <i class="fa fa-calendar" ng-click=""></i>
      <div class="toggle" style="float:right">
        <md-switch ng-model="data.cb1" aria-label="Switch 1">
          Filter
        </md-switch>
      </div>
    </div>

    <div class="list" id="upload-container">
      <div class="item item-avatar">
        <i class="fa fa-upload" ng-click="uploadFiles()"></i>
        <i class="fa fa-tag"></i>
        <span class="file-input"><input type="file" accept="image/*,.pdf,.doc,.docx,.txt,.zip" id="upload" multiple/></span>
        <div class="chips">
          <md-chips ng-model="searchTags" name="tagName" readonly="false" md-removable="true" md-max-chips="10" placeholder="Add tag(s) here...">
            <md-chip-template>
              <strong>{{$chip}}</strong>
            </md-chip-template>
          </md-chips>
        </div>
      </div>
    </div>

    <div class="search-results">
      <!-- <div class="warning" ng-if="!searchResults || searchResults.length < 1">
        <h1>No search results.</h1>
      </div> -->
      <div class="list card" ng-repeat="item in searchResults track by $index" ng-if="searchResults || searchResults.length > 0">
        <div class="item item-avatar">
            <i class="fa" ng-class="item.icon" aria-hidden="true"></i>
          <h2>{{item.title}}</h2>
          <p>Modified: {{item.updatedAt | date:'fullDate'}}</p>
          <span class="shared-with">
              <span class="user" ng-repeat="item in item.members track by $index" ng-style="{'z-index':'{{$index*-1}}','margin-left':'-{{$index*5}}px'}">
                <div class="image" ng-style="{'background-image':'url({{item.attributes.image._url}})'}"></div>
              </span>
          </span>
        </div>
        <div class="item item-body" ng-if="item.description">
          <p>{{item.description}}</p>
        </div>
      </div>
    </div>
    <div class="file-dashboard animated fadeIn">
      <div class="list card">
        <div class="item item-avatar">
          <i class="fa fa-folder-o" aria-hidden="true"></i>
          <h2>Recent Files</h2>
          <!-- <p>Stats &amp; Quick Reference</p> -->
        </div>
        <div class="item item-body" ng-repeat="item in userFiles">
            <i class="fa" ng-class="item.attributes.icon" aria-hidden="true"></i> <span><a href="{{item.attributes.file._url}}" target="_blank">{{item.attributes.title}}</a></span>
            <span class="modified">
                <span>Modified: {{item.updatedAt | date:'shortDate'}}</span>
            </span>
            <span class="tags">
                <span ng-repeat="tag in item.attributes.tags">
                    {{tag}}
                </span>
            </span>
            <span class="user-file-options">
                <i class="fa fa-download" aria-hidden="true"></i>&nbsp;
                <i class="fa fa-share-alt" aria-hidden="true"></i>&nbsp;
                <i class="fa fa-times" aria-hidden="true"></i>&nbsp;
            </span>
        </div>
      </div>
      <div class="list card">
          <div class="item item-avatar">
            <i class="fa fa-folder-o" aria-hidden="true"></i>
            <h2>Shared Files</h2>
            <!-- <p>Stats &amp; Quick Reference</p> -->
          </div>
          <div class="item item-body" ng-repeat="item in userSharedFiles">
              <i class="fa" ng-class="item.icon" aria-hidden="true"></i><span> <a href="{{item.file._url}}" target="_blank">{{item.title}}</a></span>
              <span class="modified">
                  <span>Modified: {{item.updatedAt | date:'shortDate'}}</span>
              </span>
              <span class="tags">
                  <span ng-repeat="tag in item.tags">
                      {{tag}}
                  </span>
              </span>
              <span class="shared-with">
                  <span class="user" ng-repeat="item in item.members track by $index" ng-style="{'z-index':'{{$index*-1}}','margin-left':'-{{$index*5}}px'}">
                    <div class="image" ng-style="{'background-image':'url({{item.attributes.image._url}})'}"></div>
                  </span>
              </span>
          </div>
        </div>
    </div>
  </ion-content>
</ion-view>