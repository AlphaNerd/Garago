<ion-view view-title="{{'LIBRARY_FAVS.HEADER' | translate }}">
    <ion-nav-bar class="bar-stable">
        <ion-nav-back-button>
        </ion-nav-back-button>
        <ion-nav-buttons side="left">
            <button class="button button-icon button-clear ion-navicon menu-toggle" menu-toggle="left">
            </button>
        </ion-nav-buttons>
        <ion-nav-buttons side="right">
            <!-- <button class="button button-icon button-clear" ng-click="createNewProject()"><i class="fa fa-icon fa-upload"></i></button>&nbsp;&nbsp; -->
            <!-- <button class="button button-icon button-clear" ng-click="showDelete()"><i class="fa fa-icon fa-minus"></i></button>&nbsp;&nbsp; -->
        </ion-nav-buttons>
    </ion-nav-bar>
    <ion-content id="Library" scroll="true" class="Browse">
        <ion-refresher pulling-text="Pull to refresh..." on-refresh="refreshData()">
        </ion-refresher>
        <!-- <div class="item item-input-inset">
            <label class="item-input-wrapper">
                <input type="text" placeholder="Search" ng-model="search.text">
            </label>
        </div> -->
        <div class="warning" ng-if="!DATA || DATA.length < 1">
            <h1>{{'LIBRARY_FAVS.NO_FAVS' | translate }}</h1>
        </div>
        <ion-list show-delete="shouldShowDelete" show-reorder="shouldShowReorder" can-swipe="listCanSwipe">
            <ion-item ng-repeat="item in DATA | filter:search.text" class="item-thumbnail-left" ng-class="item.class == 'animated bounceIn' ? 'new':''">
                <div class="user" ng-style="{'z-index':'{{$index*-1}}','margin-left':'-{{$index*5}}px'}">
                  <div class="image" ng-style="{'background-image':'url({{item.attributes.createdBy.image._url || '../img/no-image.jpg'}})'}"></div>
                </div>
                <h2><a href="{{item.attributes.file._url}}" target="_blank">{{item.attributes.title}}</a>&nbsp;<i class="fa fa-pencil" ng-if="item.attributes.ACL.permissionsById[CurrentUser.id].write" ng-click="editFile(item.id)"></i></h2>
                <p>{{item.attributes.description}}</p>
                <p class="last-updated">{{'LAST_UPDATED' | translate }}: {{item.updatedAt | moment}}</p>
                <p class="created-by">{{'CREATED_BY' | translate }}: {{item.attributes.createdBy.email}}</p>
                <div class="tags">
                    <span ng-repeat="tag in item.attributes.tags" class="tag">
                        {{tag.title}}
                    </span>
                </div>
                <div class="ratings">
                    <star-rating-comp on-click="rateFile($event)"></star-rating-comp>
                </div>
                <!-- <div class="acl-indicator">
                    <div ng-class="item.attributes.ACL.permissionsById['*'].read ? 'green':'grey'">R</div>
                    <div ng-class="item.attributes.ACL.permissionsById[CurrentUser.id].write ? 'green':'grey'">W</div>
                </div> -->
                <div class="favs-options">
                    <i class="fa" ng-class="isFavFile(item) ? 'fa-star' : 'fa-star-o'" ng-click="addToFavs(item.id)"></i>
                </div>
                <div class="share-options">
                    <a href="{{item.attributes.file._url}}" download><i class="fa fa-download" ng-click="addToFavs(item.id)"></i></a>
                </div>
                <ion-option-button class="button-positive" ng-click="share(item)">
                    {{'SHARE' | translate }}
                </ion-option-button>
                <ion-option-button class="button-assertive" ng-click="deleteProject(item)" ng-if="item.attributes.ACL.permissionsById[CurrentUser.id].write">
                    {{'DELETE' | translate }}
                </ion-option-button>
                <ion-delete-button class="fa fa-minus-circle" ng-click="deletePlan(item,$index)">
                </ion-delete-button>
                <ion-reorder-button class="ion-navicon" on-reorder="reorderItem(item, $fromIndex, $toIndex)" ng-if="item.attributes.ACL.permissionsById[CurrentUser.id].write">
                </ion-reorder-button>
            </ion-item>
        </ion-list>
    </ion-content>
</ion-view>